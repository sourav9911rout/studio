
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // =====================================================================
    // Helper Functions
    // =====================================================================

    // =====================================================================
    // Collection Rules
    // =====================================================================

    /**
     * @description Provides public read access and authenticated write access to daily drug highlights.
     * @path        /drugHighlights/{date}
     * @allow       read: Any user, authenticated or not, can read drug highlights.
     * @allow       write: Any authenticated user can create, update, or delete a drug highlight.
     * @principle   Secures a public dataset by requiring authentication for all write operations.
     */
    match /drugHighlights/{date} {
      // READ rules: Data is public and can be read by anyone.
      allow read: if true;

      // WRITE rules: Allow writes only if the user is authenticated.
      // This is a basic protection for the PIN-based edit mode.
      allow write: if request.auth != null;
    }
  }
}
