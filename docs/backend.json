
{
  "entities": {
    "DrugHighlight": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DrugHighlight",
      "type": "object",
      "description": "Represents a single drug's pharmacological information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "A unique identifier for this specific drug entry (e.g., a UUID)."
        },
        "drugName": {
          "type": "string",
          "description": "The common name of the drug."
        },
        "drugClass": {
          "type": "string",
          "description": "The pharmacological class of the drug."
        },
        "mechanism": {
          "type": "string",
          "description": "The mechanism of action of the drug."
        },
        "uses": {
          "type": "string",
          "description": "Common clinical uses of the drug."
        },
        "sideEffects": {
          "type": "string",
          "description": "Notable side effects associated with the drug."
        },
        "routeOfAdministration": {
          "type": "string",
          "description": "How the drug is administered (e.g., oral, intravenous)."
        },
        "dose": {
          "type": "string",
          "description": "Typical dosage information."
        },
        "dosageForm": {
          "type": "string",
          "description": "The physical form of the drug (e.g., tablet, capsule)."
        },
        "halfLife": {
          "type": "string",
          "description": "The biological half-life of the drug."
        },
        "clinicalUses": {
          "type": "string",
          "description": "Specific clinical applications and contexts."
        },
        "contraindication": {
          "type": "string",
          "description": "Conditions or factors that serve as a reason to withhold a certain medical treatment."
        },
        "offLabelUse": {
          "type": "object",
          "description": "Uses for the drug that are not approved by the regulatory agencies, with references.",
          "properties": {
            "value": {
              "type": "string"
            },
            "references": {
              "type": "array",
              "items": {
                "type": "string",
                "format": "uri"
              }
            }
          },
          "required": ["value", "references"]
        },
        "funFact": {
          "type": "string",
          "description": "An interesting and verifiable fact about the drug."
        }
      },
      "required": [
        "id",
        "drugName",
        "drugClass",
        "mechanism",
        "uses",
        "sideEffects",
        "routeOfAdministration",
        "dose",
        "dosageForm",
        "halfLife",
        "clinicalUses",
        "contraindication",
        "offLabelUse",
        "funFact"
      ]
    },
    "DailyHighlight": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DailyHighlight",
      "type": "object",
      "description": "A document representing a single day, containing a list of drug highlights for that day.",
      "properties": {
        "date": {
          "type": "string",
          "format": "date",
          "description": "The date for these highlights in YYYY-MM-DD format. This corresponds to the document ID."
        },
        "drugs": {
          "type": "array",
          "description": "A list of drug highlights for the day.",
          "items": {
            "$ref": "#/backend/entities/DrugHighlight"
          }
        }
      },
      "required": ["date", "drugs"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/drugHighlights/{date}",
        "definition": {
          "entityName": "DailyHighlight",
          "schema": {
            "$ref": "#/backend/entities/DailyHighlight"
          },
          "description": "Stores a list of drug highlights for a specific day. The 'date' parameter serves as the document ID (YYYY-MM-DD format).",
          "params": [
            {
              "name": "date",
              "description": "Date in YYYY-MM-DD format, serving as the document ID."
            }
          ]
        }
      }
    ],
    "reasoning": "The data structure is changed to support multiple drugs per day. Each document in the `drugHighlights` collection is now a `DailyHighlight` object, identified by the date. This object contains an array of `DrugHighlight` objects, allowing for multiple entries per day. This structure is efficient for querying all drugs for a given day."
  }
}
